{
  "$schema": "https://ui.shadcn.com/schema/registry-item.json",
  "name": "fluid-expanding-grid",
  "title": "Fluid Expanding Grid",
  "description": "A responsive gallery grid that fluidly shifts and expands items using motion layout.",
  "dependencies": [
    "motion",
    "clsx",
    "tailwind-merge"
  ],
  "files": [
    {
      "path": "registry/default/example/fluid-expanding-grid.tsx",
      "content": "\"use client\";\r\n\r\nimport React, { useState } from \"react\";\r\nimport { motion, LayoutGroup } from \"framer-motion\";\r\nimport { cn } from \"@/lib/utils\";\r\n\r\ninterface GalleryItem {\r\n  id: string;\r\n  title: string;\r\n  subtitle: string;\r\n  image: string;\r\n  color: string;\r\n}\r\n\r\nconst ITEMS: GalleryItem[] = [\r\n  {\r\n    id: \"grassy\",\r\n    title: \"Highlands\",\r\n    subtitle: \"Golden fields under the giant\",\r\n    image:\r\n      \"https://images.unsplash.com/photo-1755441172753-ac9b90dcd930?w=600&auto=format&fit=crop&q=60&ixlib=rb-4.1.0&ixid=M3wxMjA3fDB8MHxleHBsb3JlLWZlZWR8OHx8fGVufDB8fHx8fA%3D%3D\",\r\n    color: \"#84cc16\",\r\n  },\r\n  {\r\n    id: \"misty\",\r\n    title: \"Crimson\",\r\n    subtitle: \"A scarlet flame in the mountains\",\r\n    image:\r\n      \"https://plus.unsplash.com/premium_photo-1667423711653-1ffb899172bc?w=600&auto=format&fit=crop&q=60&ixlib=rb-4.1.0&ixid=M3wxMjA3fDB8MHxleHBsb3JlLWZlZWR8MjZ8fHxlbnwwfHx8fHw%3D\",\r\n    color: \"#10b981\",\r\n  },\r\n  {\r\n    id: \"desert\",\r\n    title: \"Deep Sea\",\r\n    subtitle: \"Floating gracefully in the abyss\",\r\n    image:\r\n      \"https://images.unsplash.com/photo-1757263005786-43d955f07fb1?w=600&auto=format&fit=crop&q=60&ixlib=rb-4.1.0&ixid=M3wxMjA3fDB8MHxleHBsb3JlLWZlZWR8Mjd8fHxlbnwwfHx8fHw%3D\",\r\n    color: \"#0369a1\",\r\n  },\r\n];\r\n\r\ninterface FluidExpandingGridProps {\r\n  items?: GalleryItem[];\r\n  className?: string;\r\n  id?: string;\r\n}\r\n\r\nexport default function FluidExpandingGrid({\r\n  items = ITEMS,\r\n  className,\r\n  id = \"fluid-gallery\",\r\n}: FluidExpandingGridProps) {\r\n  const [layout, setLayout] = useState(() => {\r\n    const ids = items.map((item) => item.id);\r\n    return {\r\n      row1: ids.slice(0, 2),\r\n      row2: ids.slice(2, Math.min(items.length, 4)),\r\n    };\r\n  });\r\n\r\n  const handleExpand = (id: string) => {\r\n    const inRow1 = layout.row1.includes(id);\r\n    const inRow2 = layout.row2.includes(id);\r\n\r\n    if (\r\n      (inRow1 && layout.row1.length === 1) ||\r\n      (inRow2 && layout.row2.length === 1)\r\n    )\r\n      return;\r\n\r\n    if (inRow1) {\r\n      const neighbor = layout.row1.find((i) => i !== id)!;\r\n      setLayout({\r\n        row1: [id],\r\n        row2: [neighbor, ...layout.row2.filter((i) => i !== neighbor)].slice(\r\n          0,\r\n          2\r\n        ),\r\n      });\r\n    } else {\r\n      const neighbor = layout.row2.find((i) => i !== id)!;\r\n      setLayout({\r\n        row1: [neighbor, ...layout.row1.filter((i) => i !== neighbor)].slice(\r\n          0,\r\n          2\r\n        ),\r\n        row2: [id],\r\n      });\r\n    }\r\n  };\r\n\r\n  return (\r\n    <div\r\n      className={cn(\r\n        \"w-full h-full flex items-center justify-center overflow-hidden py-12 not-prose\",\r\n        className\r\n      )}\r\n    >\r\n      <div className=\"w-full max-w-2xl px-6\">\r\n        <LayoutGroup id={id}>\r\n          <motion.div\r\n            layout\r\n            className=\"grid grid-cols-2 grid-rows-2 gap-6 w-full h-[340px] sm:h-[540px]\"\r\n          >\r\n            {items.map((item) => {\r\n              const isRow1 = layout.row1.includes(item.id);\r\n              const rowArr = isRow1 ? layout.row1 : layout.row2;\r\n              const isSelected = rowArr.length === 1 && rowArr[0] === item.id;\r\n\r\n              const gridRow = isRow1 ? 1 : 2;\r\n              let gridColumn = \"\";\r\n              if (isSelected) {\r\n                gridColumn = \"1 / span 2\";\r\n              } else {\r\n                if (isRow1) {\r\n                  gridColumn = layout.row1.indexOf(item.id) === 0 ? \"1\" : \"2\";\r\n                } else {\r\n                  gridColumn = layout.row2.indexOf(item.id) === 0 ? \"1\" : \"2\";\r\n                }\r\n              }\r\n\r\n              return (\r\n                <motion.div\r\n                  key={item.id}\r\n                  layoutId={`${id}-${item.id}`}\r\n                  onClick={() => handleExpand(item.id)}\r\n                  style={{ gridRow, gridColumn } as any}\r\n                  className={cn(\r\n                    \"relative cursor-pointer group w-full h-full\",\r\n                    isSelected ? \"z-30\" : \"z-10\"\r\n                  )}\r\n                  transition={{\r\n                    layout: {\r\n                      type: \"spring\",\r\n                      stiffness: 100,\r\n                      damping: 25,\r\n                    },\r\n                  }}\r\n                >\r\n                  <motion.div\r\n                    layoutId={`${id}-${item.id}-mask-wrapper`}\r\n                    className=\"absolute inset-0 overflow-hidden bg-zinc-100\"\r\n                    style={{ borderRadius: 32 }}\r\n                  >\r\n                    <img\r\n                      src={item.image}\r\n                      alt={item.title}\r\n                      className={cn(\r\n                        \"absolute inset-0 w-full h-full object-cover transition-all duration-1000 ease-in-out\",\r\n                        isSelected\r\n                          ? \"object-[center_35%]\"\r\n                          : \"object-[center_50%]\"\r\n                      )}\r\n                    />\r\n                    <motion.div\r\n                      layoutId={`${id}-${item.id}-mask`}\r\n                      className={cn(\r\n                        \"absolute inset-0 transition-colors duration-700\",\r\n                        isSelected ? \"bg-black/0\" : \"bg-black/20\"\r\n                      )}\r\n                    />\r\n                  </motion.div>\r\n\r\n                  <motion.div\r\n                    layout=\"position\"\r\n                    className=\"absolute inset-0 p-6 flex flex-col justify-end text-white z-10 select-none\"\r\n                  >\r\n                    <motion.div layout=\"position\" className=\"overflow-hidden\">\r\n                      <motion.h3\r\n                        layout=\"position\"\r\n                        className=\"text-2xl sm:text-3xl font-medium mb-1 tracking-tight\"\r\n                      >\r\n                        {item.title}\r\n                      </motion.h3>\r\n                      <motion.p\r\n                        layout=\"position\"\r\n                        className=\"text-xs sm:text-sm text-white/80 font-normal whitespace-nowrap\"\r\n                      >\r\n                        {item.subtitle}\r\n                      </motion.p>\r\n                    </motion.div>\r\n                  </motion.div>\r\n\r\n                  <motion.div\r\n                    layoutId={`${id}-${item.id}-overlay`}\r\n                    className=\"absolute inset-0 pointer-events-none\"\r\n                    style={{\r\n                      borderRadius: 32,\r\n                      background:\r\n                        \"linear-gradient(to top, rgba(0,0,0,0.5) 0%, transparent 60%)\",\r\n                    }}\r\n                  />\r\n                  <motion.div\r\n                    layoutId={`${id}-${item.id}-border`}\r\n                    className=\"absolute inset-0 border border-white/10 group-hover:border-white/20 transition-colors duration-500 pointer-events-none\"\r\n                    style={{ borderRadius: 32 }}\r\n                  />\r\n                </motion.div>\r\n              );\r\n            })}\r\n          </motion.div>\r\n        </LayoutGroup>\r\n      </div>\r\n    </div>\r\n  );\r\n}\r\n",
      "type": "registry:component"
    }
  ],
  "type": "registry:component"
}